{%- comment %}<locksmith:f61a>{% endcomment -%}
  {%- include 'locksmith' -%}
{%- comment %}</locksmith:f61a>{% endcomment -%}

{% include 'shogun-content-handler' %}
<!doctype html>
<html>
  <head>
    {{ locksmith_initializations }}
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11135269055"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-11135269055');
    </script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MKTB842Z');</script>
<!-- End Google Tag Manager -->
    <title>
      {{ shop.name }}
      |
      {{ page_title }}
    </title>

    <meta http-equiv="Access-Control-Allow-Origin" content="{{ shop.url }}">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">

    {{ content_for_header }}

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    >
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      rel="stylesheet"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    >

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    >

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"
      integrity="sha512-rd0qOHVMOcez6pLWPVFIv7EfSdGKLt+eafXh4RO/12Fgr41hDQxfGvoi1Vy55QIVcQEujUE1LQrATCLl2Fs+ag=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    >

    <!-- Calendly link widget begin -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    <!-- Calendly link widget end -->

    {{ 'owl.carousel.min.css' | asset_url | stylesheet_tag }}
    {{ 'owl.theme.default.min.css' | asset_url | stylesheet_tag }}

    {{ 'bootstrap-custom.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-style.css' | asset_url | stylesheet_tag }}

    {{ 'hnz-res-base.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-compare.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-order.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-ug-ultra.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-ug-pro.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-ug-standard.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-videos.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-contact.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-store.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-about.css' | asset_url | stylesheet_tag }}
    {{ 'hnz-res-support.css' | asset_url | stylesheet_tag }}
    {{ 'component.css' | asset_url | stylesheet_tag }}
    {% comment %} {{ 'hnz-res-dealer.css' | asset_url | stylesheet_tag }} {% endcomment %}

    <!-- Theme -->

    {{ 'global-style.scss.css' | asset_url | stylesheet_tag }}
    {{ 'leslie.css' | asset_url | stylesheet_tag }}

    <style>
      body section {
          padding: 0 !important;
      }
      .vanpower-header {
          position: fixed !important;
          z-index: 9999;
          transition: all .1s ease !important;
      }
    </style>

    {% if template == 'page.payment-method'
      or template == 'page.privacy-policy'
      or template == 'page.return-policy'
      or template == 'page.shipping-policy'
      or template == 'page.terms-conditions'
      or template == 'page.warranty'
      or template == 'blog'
      or template == 'article'
      or template == 'page.videos'
      or template == 'page.contact'
      or template == 'page.find-store'
      or template == 'page.reviews'
      or template == 'page.about_us'
      or template == 'page.support'
      or template == 'page.become_dealer'
    %}
      <style>
        .pre-footer {
            display: none;
        }
      </style>
    {% endif %}
  
  {% render 'shogun-head' %}
</head>
  <body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKTB842Z"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <script>
            document.addEventListener('DOMContentLoaded', function() {
                // 监听 "Book A Test-Ride" 按钮点击事件
                document.querySelectorAll('.btn-atc').forEach(function(button) {
                    button.addEventListener('click', function () {
                        gtag('event', 'Initiate a Book', {
                            'event_category': 'engagement',
                            'event_label': 'Book A Test-Ride',
                            'page_path': window.location.pathname,
                            'click_text': button.innerText
                        });
                    });
                });

                // 监听其他 "Book" 按钮点击事件
                document.querySelectorAll('.book-btn').forEach(function(button) {
                    button.addEventListener('click', function () {
                      console.log('test ride aaa')
                        gtag('event', 'Choose Store', {
                            'event_category': 'engagement',
                            'event_label': 'Book',
                            'page_path': window.location.pathname,
                            'click_text': button.innerText
                        });
                    });
                });
            });
        </script>
        <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
    {{ 'component.js' | asset_url | script_tag }}

  <!-- Calendly inline widget begin -->
  <div id="calendly-container" style="display:none;">
    <div class="calendly-inline-widget" data-url="https://calendly.com/vanpowers" style="min-width:320px;height:700px;"></div>
  </div>
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
  <!-- Calendly inline widget end -->
    
    {% render 'hnz-video' %}

    {% section 'announcement-bar' %}
    {% section 'header' %}

    {{ content_for_layout }}

    {% section 'subscribe-form' %}

    {% section 'footer' %}

    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    {% if template == 'page.urbanglide-ultra'
      or template == 'page.urbanglide-pro'
      or template == 'page.urbanglide-standard'
    %}
      <script src="https://hotspot-images.ui-chunx.com/include.js" async></script>
    {% endif %}

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"
      integrity="sha512-Ysw1DcK1P+uYLqprEAzNQJP+J4hTx4t/3X2nbVwszao8wD+9afLjBQYjz7Uk4ADP+Er++mJoScI42ueGtQOzEA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    {% section 'drawer' %}

    {{ 'owl.carousel.min.js' | asset_url | script_tag }}

    {{ 'hnz-main.js' | asset_url | script_tag }}

    {% if template == 'page.compare-models' %}
      {{ 'hnz-compare.js' | asset_url | script_tag }}
    {% endif %}

    {% if template contains 'product' %}
      {{ 'hnz-product.js' | asset_url | script_tag }}
      {{ 'hnz-global.js' | asset_url | script_tag }}
    {% endif %}

    {% if template == 'page.urbanglide-ultra' %}
      {{ 'hnz-ug-ultra.js' | asset_url | script_tag }}
    {% endif %}

    {% if template == 'page.urbanglide-pro' %}
      {{ 'hnz-ug-pro.js' | asset_url | script_tag }}
    {% endif %}

    {% if template == 'page.urbanglide-standard' %}
      {{ 'hnz-ug-standard.js' | asset_url | script_tag }}
    {% endif %}

    {% if template == 'page.find-store' %}
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
       integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
       crossorigin=""></script>
      {{ 'hnz-store-1.js' | asset_url | script_tag }}
    {% endif %}

    {% if product %}
      <script>
        document.addEventListener('DOMContentLoaded', function() {
            recentlyViewed({
                productId: '{{ product.id }}',
                title: '{{ product.title }}',
                description: '{{ product.metafields.custom.product_short_description }}',
                price: '{{ product.price | money }}',
                imageUrl: '{{ product.featured_image | img_url: 'master' }}',
                productUrl: '{{ product.url }}',
                starBadge: "{{ product.metafields.judgeme.badge }}"
            });
        });
      </script>
    {% endif %}

    <script>
      $('.ymal-form').on('submit', function (event) {
          event.preventDefault();
          let formData = $(this).serialize();

          $.ajax({
              type: 'POST',
              url: '/cart/add.js',
              data: formData,
              dataType: 'json',
              success: function (response) {
                  refreshCart();
              },
              error: function (xhr, status, error) {
                  console.error('Error adding product to cart:', error);
              }
          });
      });

      function refreshCart() {
          drawerCart.loadCart();

          $.ajax({
              type: 'GET',
              url: window.location.href,
              dataType: 'html',
              success: function(cartHtml) {
                  let count = $('#CartCount span').html();

                  if (count != 0)
                      $('#CartCount').removeClass('d-none');
                  else
                      $('#CartCount').addClass('d-none');

                  $('#CartCount span').html(count);
              },
              error: function(xhr, status, error) {
                  console.error('Error fetching cart data:', error);
              }
          });
      }
    </script>
  </body>
</html>
